import{u as S,b as R,r as n,R as D,j as e,L as k,s as F,a as l,c as T,d as x,e as G,g as M,f as I,h as w,i as j,k as A}from"./index-CQK3th8v.js";import{u as W,T as q}from"./Toast-FIzOfCZQ.js";import{M as O}from"./Modal-CCdm8AiG.js";const z=()=>{const i=S(),d=R(),{toasts:y,success:c,error:a,info:h,removeToast:b}=W(),[t,v]=n.useState({email:"",password:""}),[g,m]=n.useState(!1),[N,u]=n.useState(!1),p=D.useRef(!1);n.useEffect(()=>{d.state?.message&&!p.current&&(h(d.state.message),p.current=!0,window.history.replaceState({},document.title))},[d.state,h]);const f=s=>{v({...t,[s.target.name]:s.target.value})},P=async s=>{s.preventDefault(),m(!0);try{const r=await T(l,t.email,t.password);if(!r.user.emailVerified){await l.signOut(),a("Please verify your email address before logging in. Check your inbox."),m(!1);return}const{isComplete:o}=await x(r.user.uid);c("Login successful!"),setTimeout(()=>{i(o?"/":"/profile")},1500)}catch(r){console.error("Login error:",r),m(!1);let o="Login failed. Please try again.";r.code==="auth/user-not-found"&&(o="No user found with this email."),r.code==="auth/wrong-password"&&(o="Incorrect password."),r.code==="auth/invalid-email"&&(o="Invalid email address."),a(o)}},C=async()=>{try{const r=(await G(l,M)).user;(await I(w(j,"users",r.uid))).exists()||await A(w(j,"users",r.uid),{name:r.displayName,email:r.email,role:"user",createdAt:new Date});const{isComplete:L}=await x(r.uid);c("Google login successful!"),setTimeout(()=>{i(L?"/":"/profile")},1500)}catch(s){console.error("Google login error:",s),a("Google login failed.")}},E=async s=>{if(!s||!s.trim()){a("Please enter your email address.");return}try{await F(l,s),c(`Password reset email sent to ${s}.`),u(!1)}catch(r){console.error("Password reset error:",r),a("Could not send password reset email.")}};return e.jsxs("div",{className:"login-page",children:[y.map(s=>e.jsx(q,{message:s.message,type:s.type,onClose:()=>b(s.id)},s.id)),N&&e.jsx(O,{title:"Reset Password",message:"Enter your email address to receive a password reset link.",onConfirm:E,onCancel:()=>u(!1),confirmText:"Send Reset Link",inputType:"email"}),e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-left",children:[e.jsxs("div",{className:"login-header",children:[e.jsxs("h1",{children:["Welcome to ",e.jsx("span",{className:"text-gradient",children:"StartosEdge"})]}),e.jsx("p",{children:"Log in to continue your journey to your dream career."})]}),e.jsxs("form",{className:"login-form",onSubmit:P,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email",value:t.email,onChange:f,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",placeholder:"Enter your password",value:t.password,onChange:f,required:!0})]}),e.jsxs("div",{className:"form-options",children:[e.jsxs("div",{className:"remember-me",children:[e.jsx("input",{type:"checkbox",id:"remember"}),e.jsx("label",{htmlFor:"remember",children:"Remember me"})]}),e.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),u(!0)},className:"forgot-password",children:"Forgot Password?"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:g,children:g?"Logging in...":"Log In"}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OR"})}),e.jsxs("button",{type:"button",className:"btn btn-google btn-full",onClick:C,children:[e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google"}),"Sign in with Google"]})]}),e.jsx("div",{className:"login-footer",children:e.jsxs("p",{children:["Don't have an account? ",e.jsx(k,{to:"/signup",children:"Sign Up"})]})})]}),e.jsx("div",{className:"login-right",children:e.jsxs("div",{className:"login-benefits",children:[e.jsx("h3",{children:"Why Choose StartosEdge?"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["ğŸš€ ",e.jsx("strong",{children:"100% Placement Assistance"})," with top MNCs"]}),e.jsxs("li",{children:["ğŸ‘¨â€ğŸ« ",e.jsx("strong",{children:"Expert Mentorship"})," from industry leaders"]}),e.jsxs("li",{children:["ğŸ’¼ ",e.jsx("strong",{children:"Real-world Projects"})," to build your portfolio"]}),e.jsxs("li",{children:["ğŸŒ ",e.jsx("strong",{children:"Global Community"})," of tech enthusiasts"]})]})]})})]})]})};export{z as default};

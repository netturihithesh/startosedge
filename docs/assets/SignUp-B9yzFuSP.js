import{u as P,r as m,j as e,L as S,a as t,l as E,k as g,d as h,b as f,m as U,h as k,i as A,n as F}from"./index-DfFaXGpw.js";import{u as D,T}from"./Toast-CyKevOvG.js";import{M as G}from"./Modal-CjpUkcO3.js";/* empty css              */const z=()=>{const l=P(),{toasts:x,success:p,error:d,removeToast:w}=D(),[r,j]=m.useState({fullName:"",email:"",password:"",confirmPassword:""}),[c,o]=m.useState(!1),[y,u]=m.useState(!1),b=()=>{u(!1),l("/")},v=async()=>{await t.signOut(),u(!1),o(!1)},n=s=>{j({...r,[s.target.name]:s.target.value})},N=async s=>{if(s.preventDefault(),r.password!==r.confirmPassword){d("Passwords don't match!");return}o(!0);try{const a=await E(t,r.email,r.password);try{await g(h(f,"users",a.user.uid),{name:r.fullName,email:r.email,role:"user",createdAt:new Date})}catch(i){throw console.error("Firestore creation failed:",i),await a.user.delete(),new Error("Failed to create user profile. Please try again.")}await U(a.user),await t.signOut(),p("Account created! Verification email sent. Please check your inbox and verify before logging in."),setTimeout(()=>{l("/login")},4e3)}catch(a){console.error("Signup error:",a);let i="Signup failed. Please try again.";a.code==="auth/email-already-in-use"&&(i="Email already in use."),a.code==="auth/weak-password"&&(i="Password is too weak (minimum 6 characters)."),a.message.includes("Failed to create user profile")&&(i=a.message),d(i)}finally{o(!1)}},C=async()=>{o(!0);try{const s=await k(t,A),a=s.user;if(!F(s)?.isNewUser){u(!0),o(!1);return}await g(h(f,"users",a.uid),{name:a.displayName,email:a.email,role:"user",createdAt:new Date},{merge:!0}),p("Account created successfully!"),setTimeout(()=>{l("/profile")},1500)}catch(s){console.error("Google signup error:",s);let a="Google signup failed.";s.code==="auth/popup-closed-by-user"?a="Signup cancelled by user.":s.code==="auth/popup-blocked"?a="Signup popup blocked by browser. Please allow popups.":s.code==="auth/operation-not-allowed"?a="Google signup is not enabled. Contact admin.":s.code==="auth/unauthorized-domain"?a="This domain is not authorized for signup. Contact admin.":s.message&&(a=`Signup failed: ${s.message}`),d(a),o(!1)}};return e.jsxs("div",{className:"signup-page",children:[y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"var(--bg-primary)",zIndex:1e4}}),e.jsx(G,{title:"Account Exists",message:"You already have an account with this email. Do you want to log in?",onConfirm:b,onCancel:v,confirmText:"Yes, Log In",type:"confirm"})]}),c&&e.jsxs("div",{className:"full-screen-loader",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Processing..."})]}),x.map(s=>e.jsx(T,{message:s.message,type:s.type,onClose:()=>w(s.id)},s.id)),e.jsxs("div",{className:"signup-container",children:[e.jsxs("div",{className:"signup-left",children:[e.jsxs("div",{className:"signup-header",children:[e.jsx("h1",{children:"Create Account"}),e.jsx("p",{children:"Join StartosEdge and kickstart your career."})]}),e.jsxs("form",{className:"signup-form",onSubmit:N,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fullName",children:"Full Name"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",placeholder:"John Doe",value:r.fullName,onChange:n,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"john@example.com",value:r.email,onChange:n,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",placeholder:"Create a password",value:r.password,onChange:n,required:!0,minLength:"6"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm your password",value:r.confirmPassword,onChange:n,required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:c,children:c?"Creating Account...":"Sign Up"}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OR"})}),e.jsxs("button",{type:"button",className:"btn btn-google btn-full",onClick:C,children:[e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google"}),"Sign up with Google"]})]}),e.jsx("div",{className:"signup-footer",children:e.jsxs("p",{children:["Already have an account? ",e.jsx(S,{to:"/login",children:"Log In"})]})})]}),e.jsx("div",{className:"signup-right",children:e.jsxs("div",{className:"signup-benefits",children:[e.jsx("h3",{children:"Join the Community"}),e.jsx("p",{children:"Get access to exclusive resources, mentorship, and job opportunities."})]})})]})]})};export{z as default};

import{u as y,r as m,j as e,L as b,l as N,a as n,k as p,d as h,b as g,m as P,h as C,i as S}from"./index-CaIlbx2F.js";import{u as E,T as A}from"./Toast-3kEd8T7S.js";const D=()=>{const l=y(),{toasts:f,success:c,error:t,removeToast:w}=E(),[r,x]=m.useState({fullName:"",email:"",password:"",confirmPassword:""}),[d,u]=m.useState(!1),o=a=>{x({...r,[a.target.name]:a.target.value})},j=async a=>{if(a.preventDefault(),r.password!==r.confirmPassword){t("Passwords don't match!");return}u(!0);try{const s=await N(n,r.email,r.password);try{await p(h(g,"users",s.user.uid),{name:r.fullName,email:r.email,role:"user",createdAt:new Date})}catch(i){throw console.error("Firestore creation failed:",i),await s.user.delete(),new Error("Failed to create user profile. Please try again.")}await P(s.user),await n.signOut(),c("Account created! Verification email sent. Please check your inbox and verify before logging in."),setTimeout(()=>{l("/login")},4e3)}catch(s){console.error("Signup error:",s);let i="Signup failed. Please try again.";s.code==="auth/email-already-in-use"&&(i="Email already in use."),s.code==="auth/weak-password"&&(i="Password is too weak (minimum 6 characters)."),s.message.includes("Failed to create user profile")&&(i=s.message),t(i)}finally{u(!1)}},v=async()=>{try{const s=(await C(n,S)).user;await p(h(g,"users",s.uid),{name:s.displayName,email:s.email,role:"user",createdAt:new Date},{merge:!0}),c("Account created successfully!"),setTimeout(()=>{l("/profile")},1500)}catch(a){console.error("Google signup error:",a),t("Google signup failed.")}};return e.jsxs("div",{className:"signup-page",children:[f.map(a=>e.jsx(A,{message:a.message,type:a.type,onClose:()=>w(a.id)},a.id)),e.jsxs("div",{className:"signup-container",children:[e.jsxs("div",{className:"signup-left",children:[e.jsxs("div",{className:"signup-header",children:[e.jsx("h1",{children:"Create Account"}),e.jsx("p",{children:"Join StartosEdge and kickstart your career."})]}),e.jsxs("form",{className:"signup-form",onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fullName",children:"Full Name"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",placeholder:"John Doe",value:r.fullName,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"john@example.com",value:r.email,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",placeholder:"Create a password",value:r.password,onChange:o,required:!0,minLength:"6"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm your password",value:r.confirmPassword,onChange:o,required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:d,children:d?"Creating Account...":"Sign Up"}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OR"})}),e.jsxs("button",{type:"button",className:"btn btn-google btn-full",onClick:v,children:[e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google"}),"Sign up with Google"]})]}),e.jsx("div",{className:"signup-footer",children:e.jsxs("p",{children:["Already have an account? ",e.jsx(b,{to:"/login",children:"Log In"})]})})]}),e.jsx("div",{className:"signup-right",children:e.jsxs("div",{className:"signup-benefits",children:[e.jsx("h3",{children:"Join the Community"}),e.jsx("p",{children:"Get access to exclusive resources, mentorship, and job opportunities."})]})})]})]})};export{D as default};

import{u as S,c as k,r as n,R,j as e,L as D,s as T,a as l,e as F,f as x,h as G,i as M,g as I,d as w,b as j,k as A}from"./index-DfFaXGpw.js";import{u as W,T as q}from"./Toast-CyKevOvG.js";import{M as z}from"./Modal-CjpUkcO3.js";/* empty css              */const B=()=>{const i=S(),d=k(),{toasts:b,success:c,error:r,info:g,removeToast:y}=W(),[t,v]=n.useState({email:"",password:""}),[h,u]=n.useState(!1),[N,m]=n.useState(!1),p=R.useRef(!1);n.useEffect(()=>{d.state?.message&&!p.current&&(g(d.state.message),p.current=!0,window.history.replaceState({},document.title))},[d.state,g]);const f=s=>{v({...t,[s.target.name]:s.target.value})},C=async s=>{s.preventDefault(),u(!0);try{const o=await F(l,t.email,t.password);if(!o.user.emailVerified){await l.signOut(),r("Please verify your email address before logging in. Check your inbox."),u(!1);return}const{isComplete:a}=await x(o.user.uid);c("Login successful!"),setTimeout(()=>{i(a?"/":"/profile")},1500)}catch(o){console.error("Login error:",o),u(!1);let a="Login failed. Please try again.";o.code==="auth/user-not-found"&&(a="No user found with this email."),o.code==="auth/wrong-password"&&(a="Incorrect password."),o.code==="auth/invalid-email"&&(a="Invalid email address."),r(a)}},P=async()=>{try{const o=(await G(l,M)).user;(await I(w(j,"users",o.uid))).exists()||await A(w(j,"users",o.uid),{name:o.displayName,email:o.email,role:"user",createdAt:new Date});const{isComplete:E}=await x(o.uid);c("Google login successful!"),setTimeout(()=>{i(E?"/":"/profile")},1500)}catch(s){console.error("Google login error:",s);let o="Google login failed.";s.code==="auth/popup-closed-by-user"?o="Login cancelled by user.":s.code==="auth/popup-blocked"?o="Login popup blocked by browser. Please allow popups.":s.code==="auth/operation-not-allowed"?o="Google login is not enabled. Contact admin.":s.code==="auth/unauthorized-domain"?o="This domain is not authorized for login. Contact admin.":s.message&&(o=`Login failed: ${s.message}`),r(o)}},L=async s=>{if(!s||!s.trim()){r("Please enter your email address.");return}try{await T(l,s),c(`Password reset email sent to ${s}.`),m(!1)}catch(o){console.error("Password reset error:",o),r("Could not send password reset email.")}};return e.jsxs("div",{className:"login-page",children:[b.map(s=>e.jsx(q,{message:s.message,type:s.type,onClose:()=>y(s.id)},s.id)),N&&e.jsx(z,{title:"Reset Password",message:"Enter your email address to receive a password reset link.",onConfirm:L,onCancel:()=>m(!1),confirmText:"Send Reset Link",inputType:"email"}),e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-left",children:[e.jsxs("div",{className:"login-header",children:[e.jsxs("h1",{children:["Welcome to ",e.jsx("span",{className:"text-gradient",children:"StartosEdge"})]}),e.jsx("p",{children:"Log in to continue your journey to your dream career."})]}),e.jsxs("form",{className:"login-form",onSubmit:C,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email",value:t.email,onChange:f,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",placeholder:"Enter your password",value:t.password,onChange:f,required:!0})]}),e.jsxs("div",{className:"form-options",children:[e.jsxs("div",{className:"remember-me",children:[e.jsx("input",{type:"checkbox",id:"remember"}),e.jsx("label",{htmlFor:"remember",children:"Remember me"})]}),e.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),m(!0)},className:"forgot-password",children:"Forgot Password?"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:h,children:h?"Logging in...":"Log In"}),e.jsx("div",{className:"divider",children:e.jsx("span",{children:"OR"})}),e.jsxs("button",{type:"button",className:"btn btn-google btn-full",onClick:P,children:[e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google"}),"Sign in with Google"]})]}),e.jsx("div",{className:"login-footer",children:e.jsxs("p",{children:["Don't have an account? ",e.jsx(D,{to:"/signup",children:"Sign Up"})]})})]}),e.jsx("div",{className:"login-right",children:e.jsxs("div",{className:"login-benefits",children:[e.jsx("h3",{children:"Why Choose StartosEdge?"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["ğŸš€ ",e.jsx("strong",{children:"100% Placement Assistance"})," with top MNCs"]}),e.jsxs("li",{children:["ğŸ‘¨â€ğŸ« ",e.jsx("strong",{children:"Expert Mentorship"})," from industry leaders"]}),e.jsxs("li",{children:["ğŸ’¼ ",e.jsx("strong",{children:"Real-world Projects"})," to build your portfolio"]}),e.jsxs("li",{children:["ğŸŒ ",e.jsx("strong",{children:"Global Community"})," of tech enthusiasts"]})]})]})})]})]})};export{B as default};
